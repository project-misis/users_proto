syntax = "proto3";

package user;

option go_package = "github.com/project-misis/users_proto/pb";

import "google/protobuf/empty.proto";
import "buf/validate/validate.proto";

service Crud {
  rpc DeleteUserByID (UserDelete) returns (google.protobuf.Empty) {}
  rpc UpdateUserByID (UserUpdate) returns (User) {}
  rpc GetUserByID (UserGet) returns (User) {}
  rpc CheckAuth (AuthCheckModel) returns (Token) {}
}

message User {
  string username = 1 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  string first_name = 2 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  string course = 3 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  string faculty = 4 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  string id = 5 [(buf.validate.field).string.uuid = true];
}

message UserUpdate {
  optional string username = 1 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  optional string first_name = 2 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  optional string course = 3 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  optional string faculty = 4 [(buf.validate.field).string = {min_len: 1, max_len: 200}];
  string id = 5 [(buf.validate.field).string.uuid = true];
}

message UserGet {
  string id = 1 [(buf.validate.field).string.uuid = true];
}

message UserDelete {
  string id = 1 [(buf.validate.field).string.uuid = true];
}

message AuthCheckModel {
  string code = 1 [(buf.validate.field).string = {min_len: 1, max_len: 8}];
}

message Token {
  string token = 1;
}
